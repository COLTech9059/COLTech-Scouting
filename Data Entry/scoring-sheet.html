<!DOCTYPE html>
<html>
  <head>
    <title>2486 - Coconuts Scouting</title>
    <script src="jquery-3.6.1.min.js"></script>
    <script src="qrcode.min.js"></script>
    <link rel="stylesheet" href="bootstrap.min.css">
    <style>
      body {
        touch-action: manipulation;
      }
      label {
        font-weight: bold;
        margin-top: 1rem;
      }
      .form-label {
        margin-bottom: 0.1rem;
      }
      .form-check label {
        font-weight: normal;
        margin-top: auto;
      }
      .btn-huge {
        --bs-btn-padding-y: 5rem;
        --bs-btn-padding-x: 5rem;
        --bs-btn-font-size: 7.5rem;
      }
      #qrcode img {
        display: inline-block !important;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="row">

        <div class="col">
          <label for="TeamNumber-input" class="form-label">Team Number</label>
          <input type="number" class="form-control" id="TeamNumber-input">
        </div>

        <div class="col">
          <label for="TeamName-input" class="form-label">Team Name</label>
          <input type="text" class="form-control" id="TeamName-input">
        </div>

        <div class="col">
          <label for="Match-input" class="form-label">Match</label>
          <input type="number" class="form-control" id="Match-input">
        </div>

      </div><!-- /.row -->

      <hr class="mt-4 mb-1">

      <div class="row">
        <div class="col">

          <label for="PrefStart-input" class="form-label">Starting Position</label>
          <input type="number" class="form-control" id="PrefStart-input">

          <label class="form-check-label" for="CompatAuto-input">Compatible Autonomous</label>
          <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="CompatAuto-input">
          </div>

        </div>
        <div class="col">
          <div class="row">
            <div class="col">
              <label for="DriveSkill-input" class="form-label">Driving Skill</label>
              <input type="range" class="form-range" id="DriveSkill-input" min="1" max="5">
            </div>
            <div class="col">
              <label for="Aggression-input" class="form-label">Aggression</label>
              <input type="range" class="form-range" id="Aggression-input" min="1" max="5">
            </div>
          </div>

          <label for="PrefDrive-input" class="form-label">Preferred Driving Area</label>
          <input type="number" class="form-control" id="PrefDrive-input">

          <label for="PrefScore-input" class="form-label">Preferred Scoring Area</label>
          <input type="number" class="form-control" id="PrefScore-input">

        </div>
        
        <div class="col">
          <div class="row">
            <div class="col">
              <label>Endgame</label>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="Endgame-input" id="Endgame-1" value="6">
                <label class="form-check-label" for="Endgame-1">
                  Low
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="Endgame-input" id="Endgame-2" value="8">
                <label class="form-check-label" for="Endgame-2">
                  Mid
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="Endgame-input" id="Endgame-3" value="10">
                <label class="form-check-label" for="Endgame-3">
                  High
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="Endgame-input" id="Endgame-4" value="15">
                <label class="form-check-label" for="Endgame-4">
                  Traverse
                </label>
              </div>
            </div>
            <div class="col">

              <label class="form-check-label" for="Outlier-input">Outlier</label>
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" role="switch" id="Outlier-input">
              </div>
              
              <label class="form-check-label" for="BreakImpact-input">Break Impact</label>
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" role="switch" id="BreakImpact-input">
              </div>
            </div>
          </div>
        </div>
      </div><!-- /.row -->

      <hr>

      <div class="row align-items-center">
        <div class="col">
          <a class="btn btn-danger btn-huge form-control" href="javascript:changeValue($('#TargetsHigh-input'),-1)">-1</a>
        </div>
        <div class="col">
          <label for="TargetsHigh-input" class="form-label">High Targets</label>
          <input type="number" class="form-control" id="TargetsHigh-input">
        </div>
        <div class="col">
            <a class="btn btn-success btn-huge form-control" href="javascript:changeValue($('#TargetsHigh-input'),1)">+1</a>
        </div>
      </div><!-- /.row -->

      <hr>

      <div class="row align-items-center">
        <div class="col">
          <a class="btn btn-danger btn-huge form-control" href="javascript:changeValue($('#TargetsLow-input'),-1)">-1</a>
        </div>
        <div class="col">
          <label for="TargetsLow-input" class="form-label">Low Targets</label>
          <input type="number" class="form-control" id="TargetsLow-input">
        </div>
        <div class="col">
            <a class="btn btn-success btn-huge form-control" href="javascript:changeValue($('#TargetsLow-input'),1)">+1</a>
        </div>
      </div><!-- /.row -->

      <hr>

      <div class="row justify-content-md-center">
        <div class="col-md-4">
          <label class="form-label" for="Comment-input">Comment</label>
          <textarea class="form-control" id="Comment-input"></textarea>
        </div>
      </div><!-- /.row -->

      <div class="row">
        <a href="javascript:updateQR()" class="btn btn-primary">Get Code</a>
      </div><!-- /.row -->

      <div class="row">
        <div class="col">
          <div id="qrcode"></div>
        </div>
      </div><!-- /.row -->

    </div><!-- /.container-->

    <script type="text/javascript">
      function changeValue(ctl,val) {
        ctl.val( isNaN(parseInt(ctl.val())) ? 1 : parseInt(ctl.val()) + val );
        if (ctl.val() < 0) {ctl.val("0")}
      }
      function updateQR() {
        // TODO: validate required fields
        // var data='{
        //           "TeamNumber":2486
        //          ,"TeamName":"Coconuts"
        //          ,"Match":"interview"
        //          ,"PrefStart":1
        //          ,"PrefDrive":"far"
        //          ,"PrefScore":"2"
        //          ,"compatAuto":true
        //          ,"DriveSkill":4
        //          ,"TargetsHigh":8
        //          ,"TargetsLow":0
        //          ,"Endgame":15
        //          ,"Aggression":2
        //          ,"Outlier":false
        //          ,"BreakImpact":false
        //          ,"Comment":"This could be a very long description of this round, etc."
        //          }';
        var data= '{'
                + '"TeamNumber":'   + JSON.stringify($("#TeamNumber-input").val())
                + ',"TeamName":'    + JSON.stringify($("#TeamName-input").val())
                + ',"Match":'       + JSON.stringify($("#Match-input").val())           // TODO: add option for interview data
                + ',"PrefStart":'   + JSON.stringify($("#PrefStart-input").val())
                + ',"PrefDrive":'   + JSON.stringify($("#PrefDrive-input").val())
                + ',"PrefScore":'   + JSON.stringify($("#PrefScore-input").val())
                + ',"CompatAuto":'  + JSON.stringify(Number($("#CompatAuto-input").is(":checked")))
                + ',"DriveSkill":'  + JSON.stringify($("#DriveSkill-input").val())
                + ',"Aggression":'  + JSON.stringify($("#Aggression-input").val())
                + ',"Outlier":'     + JSON.stringify(Number($("#Outlier-input").is(":checked")))
                + ',"BreakImpact":' + JSON.stringify(Number($("#BreakImpact-input").is(":checked")))
                + ',"TargetsHigh":' + JSON.stringify($("#TargetsHigh-input").val())
                + ',"TargetsLow":'  + JSON.stringify($("#TargetsLow-input").val())
                + ',"Endgame":'     + JSON.stringify($("input[name='Endgame-input']:checked").val())
                + ',"Comment":'     + JSON.stringify($("#Comment-input").val())
                + '}';
        $("#qrcode").html(""); // clear the QR div's previous content
        new QRCode(document.getElementById("qrcode"), {text:data,width:320,height:320});
      }
    </script>
  </body>
</html>