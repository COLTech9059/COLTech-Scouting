<!DOCTYPE html>
<html>
  <head>
    <title>Data for ARL 2022</title>
    <script src="jquery-3.6.1.min.js"></script>
    <script src="qrcode.min.js"></script>
    <link rel="stylesheet" href="bootstrap.min.css">
    <style>
      body {
        touch-action: manipulation;
      }
      label {
        font-weight: bold;
        margin-top: 1rem;
      }
      .form-label {
        margin-bottom: 0.1rem;
      }
      .form-check label {
        font-weight: normal;
        margin-top: auto;
      }
      .btn-huge {
        --bs-btn-padding-y: 5rem;
        --bs-btn-padding-x: 5rem;
        --bs-btn-font-size: 7.5rem;
      }
      #qrcode img {
        display: inline-block !important;
        margin: 2rem 0rem;
      }
    </style>
    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker
        .register("sw.js")
        .then(() => console.log("Successfully registered service worker"));
      }
    </script>
  </head>
  <body>
    <form>
      <div class="container">
        <div class="row">
          <div class="col text-end">
            <input type="reset" value="Reset all fields" onClick="javascript:$('body').removeClass('was-validated');">
          </div>
        </div>
        <div class="row">

          <div class="col">
            <label for="TeamNumber-input" class="form-label">Team Number</label>
            <input type="number" class="form-control" id="TeamNumber-input" min="1" required>
            <div class="invalid-feedback">
              Please set the team number.
            </div>
          </div>

          <div class="col">
            <label for="TeamName-input" class="form-label">Team Name</label>
            <input type="text" class="form-control" id="TeamName-input">
          </div>

          <div class="col">
            <label for="Match-input" class="form-label">Match</label>
            <input type="number" class="form-control" id="Match-input" min="1" required>
            <div class="invalid-feedback">
              Please set the match number.
            </div>
          </div>

        </div><!-- /.row -->

        <hr class="mt-4 mb-1">

        <div class="row">
          <div class="col">
            
            <label for="PrefScore-input" class="form-label">Preferred Scoring Area</label>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="PrefScore-input" id="PrefScore-1" value="Fender" required>
              <label class="form-check-label" for="PrefScore-1">
                Fender
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="PrefScore-input" id="PrefScore-2" value="Near" required>
              <label class="form-check-label" for="PrefScore-2">
                Near
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="PrefScore-input" id="PrefScore-3" value="Far" required>
              <label class="form-check-label" for="PrefScore-3">
                Far
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="PrefScore-input" id="PrefScore-4" value="Launch" required>
              <label class="form-check-label" for="PrefScore-4">
                Launch
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="PrefScore-input" id="PrefScore-5" value="None" required>
              <label class="form-check-label" for="PrefScore-5">
                None
              </label>
            </div>
          </div>
          <div class="col">
            <label for="PrefScore-input" class="form-label">Preferred Collecting Area</label>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="Collect-input" id="Collect-1" value="Any" required>
              <label class="form-check-label" for="Collect-1">
                Any
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="Collect-input" id="Collect-2" value="Terminal" required>
              <label class="form-check-label" for="Collect-2">
                Terminal
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="Collect-input" id="Collect-3" value="Near" required>
              <label class="form-check-label" for="Collect-3">
                Near
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="Collect-input" id="Collect-4" value="Far" required>
              <label class="form-check-label" for="Collect-4">
                Far
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="Collect-input" id="Collect-5" value="None" required>
              <label class="form-check-label" for="Collect-5">
                None
              </label>
            </div>
          </div>
          
          <div class="col">
            <div class="row">
              <label>Endgame</label>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="Endgame-input" id="Endgame-0" value="0" required>
                <label class="form-check-label" for="Endgame-0">
                  No climb
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="Endgame-input" id="Endgame-1" value="6" required>
                <label class="form-check-label" for="Endgame-1">
                  Low
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="Endgame-input" id="Endgame-2" value="8" required>
                <label class="form-check-label" for="Endgame-2">
                  Mid
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="Endgame-input" id="Endgame-3" value="10" required>
                <label class="form-check-label" for="Endgame-3">
                  High
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="Endgame-input" id="Endgame-4" value="15" required>
                <label class="form-check-label" for="Endgame-4">
                  Traverse
                </label>
              </div>
            </div>

            <div class="row">
              <div class="form-check">
                <label for="ClimbStart-input" class="form-label">Climb Start Seconds</label>
                <input type="text" class="form-control" id="ClimbStart-input" required>
                <div class="invalid-feedback">
                  Please set the time they started the climb
                </div>
              </div>
            </div>
          </div>
        </div>

        <hr>

        <div class="row align-items-center">
          <div class="col">
            <a class="btn btn-danger btn-huge form-control" href="javascript:changeValue($('#TargetsAuto-input'),-1)">-1</a>
          </div>
          <div class="col">
            <label for="TargetsAuto-input" class="form-label">Autonomous Cargo</label>
            <input type="number" class="form-control" id="TargetsAuto-input" min="0" value="0" required>
            <div class="invalid-feedback">
              Please set how many points from Autonomous.
            </div>
          </div>
          <div class="col">
              <a class="btn btn-success btn-huge form-control" href="javascript:changeValue($('#TargetsAuto-input'),1)">+1</a>
          </div>
        </div><!-- /.row -->

        <hr>

        <div class="row align-items-center">
          <div class="col">
            <a class="btn btn-danger btn-huge form-control" href="javascript:changeValue($('#TargetsTele-input'),-1)">-1</a>
          </div>
          <div class="col">
            <label for="TargetsTele-input" class="form-label">Teleop Cargo</label>
            <input type="number" class="form-control" id="TargetsTele-input" min="0" value="0" required>
            <div class="invalid-feedback">
              Please set how many points from Teleop.
            </div>
          </div>
          <div class="col">
              <a class="btn btn-success btn-huge form-control" href="javascript:changeValue($('#TargetsTele-input'),1)">+1</a>
          </div>
        </div><!-- /.row -->

        <hr>

        <div class="row">
          <div class="col">
            <label class="form-label" for="Comment-input">Comment</label>
            <textarea class="form-control" id="Comment-input" rows="6"></textarea>
          </div>

          <div class="col text-center">
            <a href="javascript:updateQR()" class="btn btn-primary form-control" style="margin-top: 2.5rem;">Get Code</a>
            <div id="qrcode"></div>
          </div>
        </div><!-- /.row -->

      </div><!-- /.container-->
    </form>

    <script type="text/javascript">
      function changeValue(ctl,val) {
        ctl.val( isNaN(parseInt(ctl.val())) ? 1 : parseInt(ctl.val()) + val );
        if (ctl.val() < 0) {ctl.val("0")}
      }
      function updateQR() {
        $('body').addClass('was-validated');
        $("#qrcode").html(""); // clear the QR div's previous content
        if ($('#TeamNumber-input:valid').length > 0 && $('#Match-input:valid').length > 0 && $("input[Name='PrefStart-input']:valid").length > 0 && $("input[Name='CycleTime-input']:valid").length > 0 && $("input[Name='PrefScore-input']:valid").length > 0 && $("input[Name='Endgame-input']:valid").length > 0 ) {
          var data= '{'
                  + '"TeamNumber":'   + JSON.stringify($("#TeamNumber-input").val())
                  + ',"TeamName":'    + JSON.stringify($("#TeamName-input").val())
                  + ',"Match":'       + JSON.stringify($("#Match-input").val())
                  // + ',"PrefStart":'   + JSON.stringify($("input[name='PrefStart-input']:checked").val())
                  + ',"PrefScore":'   + JSON.stringify($("input[name='PrefScore-input']:checked").val())
                  + ',"Collect":'   + JSON.stringify($("input[name='Collect-input']:checked").val())
                  // + ',"CycleTime":'   + JSON.stringify($("input[name='CycleTime-input']:checked").val())
                  // + ',"PrefScore":'   + JSON.stringify($("input[name='PrefScore-input']:checked").val())
                  // + ',"CompatAuto":'  + JSON.stringify(Number($("#CompatAuto-input").is(":checked")))
                  // + ',"DriveSkill":'  + JSON.stringify($("#DriveSkill-input").val())
                  // + ',"Aggression":'  + JSON.stringify($("#Aggression-input").val())
                  // + ',"Outlier":'     + JSON.stringify(Number($("#Outlier-input").is(":checked")))
                  // + ',"BreakImpact":' + JSON.stringify(Number($("#BreakImpact-input").is(":checked")))
                  // + ',"DefenseOnly":' + JSON.stringify(Number($("#DefenseOnly-input").is(":checked")))
                  + ',"TargetsAuto":' + JSON.stringify($("#TargetsAuto-input").val())
                  + ',"TargetsTele":'  + JSON.stringify($("#TargetsTele-input").val())
                  + ',"Endgame":'     + JSON.stringify($("input[name='Endgame-input']:checked").val())
                  + ',"Comment":'     + JSON.stringify($("#Comment-input").val())
                  + '}';
          new QRCode(document.getElementById("qrcode"), {text:data,width:480,height:480});
        }
      }
    </script>
  </body>
</html>
